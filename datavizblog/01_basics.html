<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="Chad's personal website.">
  <meta name="keywords" content="chad, chadloh, hyunchae loh, hyun chae loh, resume, CV, personal website">
  <meta name="author" content="chadloh">
  <title>Chad Loh</title>
  <link rel="shortcut icon" href="../assets/img/favicon.png">
  <link rel="stylesheet" href="../assets/css/plugins.css">
  <link rel="stylesheet" href="../assets/css/style.css">
  <script src="https://d3js.org/d3.v4.js"></script>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-E8ZS83VSS9"></script>
  <!-- Code Highligher -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github.min.css">
  
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag() { dataLayer.push(arguments); }
    gtag('js', new Date());

    gtag('config', 'G-E8ZS83VSS9');
  </script>
</head>

<body class="onepage" data-bs-spy="scroll" data-bs-target=".navbar">
  <div class="content-wrapper">
    <!-- header -->
    <header class="wrapper bg-gray">
      <nav class="navbar navbar-expand-lg center-logo transparent navbar-light">
        <div class="container flex-lg-row flex-nowrap align-items-center">
          <div class="navbar-brand w-100">
            <a href="../index.html">
              <img src="./assets/img/logo.png" srcset="./assets/img/logo@2x.png 2x" alt="">
            </a>
          </div>
          <div class="navbar-collapse offcanvas offcanvas-nav offcanvas-start">
            <div class="offcanvas-header d-lg-none d-xl-none">
              <a href="../index.html"><img src="./assets/img/logo-light.png" srcset="./assets/img/logo-light@2x.png 2x"
                  alt="" /></a>
              <button type="button" class="btn-close btn-close-white" data-bs-dismiss="offcanvas"
                aria-label="Close"></button>
            </div>
            <div class="offcanvas-body ms-lg-auto d-flex flex-column h-100">
              <ul class="navbar-nav">
                <li class="nav-item"><a class="nav-link" href="../index.html">Home</a></li>
                <li class="nav-item"><a class="nav-link" href="../index.html#about">About</a></li>
                <li class="nav-item"><a class="nav-link" href="../index.html#projects">Projects</a></li>
                <li class="nav-item"><a class="nav-link active" href="../datavizblog.html">Data Viz</a></li>
                <li class="nav-item"><a class="nav-link" href="../index.html#contact">Contact</a></li>
              </ul>
              <!-- /.navbar-nav -->
            </div>
            <!-- /.offcanvas-body -->
          </div>
          <!-- /.navbar-collapse -->
          <div class="navbar-other w-100 d-flex ms-auto">
            <ul class="navbar-nav flex-row align-items-center ms-auto social">
              <li class="nav-item"><a href="https://www.instagram.com/chadloh/"><i class="uil uil-instagram"></i></a>
              </li>
              <li class="nav-item"><a href="https://github.com/chadloh"><i class="uil uil-github"></i></a></li>
              <li class="nav-item"><a href="https://www.linkedin.com/in/chadloh/"><i class="uil uil-linkedin"></i></a>
              </li>
              <li class="nav-item"><a href="https://scholar.google.com/citations?user=TGiD1W0AAAAJ&hl=en&oi=ao"><i
                    class="uil uil-graduation-cap"></i></a></li>
              <li class="nav-item d-lg-none">
                <button class="hamburger offcanvas-nav-btn"><span></span></button>
              </li>
            </ul>
            <!-- /.navbar-nav -->
          </div>
        </div>
        <!-- /.container -->
      </nav>
      <!-- /.navbar -->
    </header>
    <!-- /header -->
    <section class="wrapper bg-primary text-white">
      <div class="container pt-10 pb-12 pt-md-19 pb-md-16 text-center">
        <div class="row">
          <div class="col-md-10 col-lg-8 col-xl-7 mx-auto">
            <div class="post-header">
              <div class="post-category text-line text-white">
                <a href="#" class="text-reset" rel="category">Data Visualization</a>
              </div>
              <h1 class="display-1 mb-3 text-white">Data Viz 101</h1>
              <p class="lead px-md-12 px-lg-12 px-xl-15 px-xxl-18 text-white">How to make intuitive and effective data visualizations using Plotly.</p>
            </div>
          </div>
        </div>
      </div>
      <div class="overflow-hidden">
        <div class="divider text-white mx-n2">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1440 92.26"><path fill="currentColor" d="M1206,21.2c-60-5-119-36.92-291-5C772,51.11,768,48.42,708,43.13c-60-5.68-108-29.92-168-30.22-60,.3-147,27.93-207,28.23-60-.3-122-25.94-182-36.91S30,5.93,0,16.2V92.26H1440v-87l-30,5.29C1348.94,22.29,1266,26.19,1206,21.2Z"/></svg>
        </div>
      </div>
    </section>
    <!-- section -->
    <section class="wrapper bg-light wrapper-border">
      <div class="container pt-14 pt-md-16 pb-13 pb-md-15">
        <div class="row">
          <div class="col">
            <article>
              <h2 class="display-6 mb-4">Importing Libraries</h2>
              <div class="row gx-0 mb-2">
                <div class="col-12 text-justify">
Throughout this plotly basics tutorial, we will be using pandas and plotly. Let's import them now with their common aliases. <br>
  <ul>
    <li>pandas: for data manipulation and analysis</li>
    <li>plotly: for interactive plotting and visualization</li>
  </ul>
The main data we will be using is the NYC PLUTO dataset, which contains information on the buildings in NYC.
You can download it from the NYC Open Data website <a href="https://www.nyc.gov/site/planning/data-maps/open-data/dwn-pluto-mappluto.page">here</a>.
I also created some dictionaries that will be useful for plotting and analysis.
If there is a categorical variable in the dataset, it is a good practice to assign a color to each category and use it consistently throughout the visualizations. 
However, it is not always easy to find a good color palette that is both visually pleasing and colorblind-friendly.
In addition, it gets more complicated when there are more than 10 categories.

<pre><code class="language-python p-5 p-md-10">import pandas as pd
import plotly.graph_objects as go

df = pd.read_csv("../data/pluto_23v3.csv")

NYC_BOROUGH_MAPPING = {
    "MN" : "Manhattan",
    "BX" : "Bronx",
    "BK" : "Brooklyn",
    "QN" : "Queens",
    "SI" : "Staten Island",
    "NYC" : "New York City"
}
COLORS_NYC = {
    "New York City" : "#262b32",
    "Manhattan" : "#e2626b",
    "Brooklyn" : "#3f78e0",
    "Bronx" : "#45c4a0",
    "Queens" : "#fab758",
    "Staten Island" : "#A07CB8"
}
COLORS_GENERAL = ["#e2626b", "#3f78e0", "#45c4a0", "#fab758", "#a07cc5", "#0E0E0E"]
NYC_BOROUGHS = ["Manhattan", "Queens", "Bronx", "Brooklyn", "Staten Island"]
BUILDING_TYPES = ["residential", "commercial"]</code></pre>
After some basic cleaning of the data, we will be ready to make some plots. We can use the pandas groupby function to aggregate the data by borough, and then we are ready to plot the results.
<pre><code class="language-python p-5 p-md-10">df["nyc_borough"] = df["borough"].map(NYC_BOROUGH_MAPPING)
df["year"] = df[["yearbuilt", "yearalter1", "yearalter2"]].max(axis=1)
df.loc[(df.year < 1700) | (df.year > 2024), "year"] = np.nan
df_plot = df.groupby(['nyc_borough']).agg(
  residential = ("resarea", "sum"),
  commercial = ("comarea", "sum"),
  )
  df_plot</code></pre>
And here is the dataframe we get.
<div class="col-lg-6 mx-auto">

<table class="table table-striped" style = "text-align: right;">
  <thead>
    <tr>
      <th></th>
      <th>residential</th>
      <th>commercial</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>Bronx</th>
      <td>530187700</td>
      <td>192227481</td>
    </tr>
    <tr>
      <th>Brooklyn</th>
      <td>1036717000</td>
      <td>417113463</td>
    </tr>
    <tr>
      <th>Manhattan</th>
      <td>896204600</td>
      <td>804781647</td>
    </tr>
    <tr>
      <th>Queens</th>
      <td>873649500</td>
      <td>347888496</td>
    </tr>
    <tr>
      <th>Staten Island</th>
      <td>22013300</td>
      <td>66284208</td>
    </tr>
  </tbody>
</table>
</div>

                </div>
              </div>
            </article>
          </div>
        </div>
      </div>
    </section>
    <section class="wrapper bg-light">
      <div class="container py-10">
        <div class="row gx-md-6 gy-3 gy-md-0">
          <div class="col-md-8 align-self-center text-center text-md-start navigation">
            <a href="./nacre.html" class="btn btn-soft-ash rounded-pill btn-icon btn-icon-start mb-0 me-1"><i class="uil uil-arrow-left"></i> Prev Post</a>
            <a href="./mfia.html" class="btn btn-soft-ash rounded-pill btn-icon btn-icon-end mb-0">Next Post <i class="uil uil-arrow-right"></i></a>
          </div>
        </div>
      </div>
    </section>
    <!-- /section -->
  </div>
  <!-- /.content-wrapper -->
  <footer class="bg-dark text-inverse">
    <div class="container py-5">
      <div class="col-12 text-center">
        <img class="mb-4" src="./assets/img/logo-light.png" srcset="./assets/img/logo-light@2x.png 2x" alt="" />
        <p class="mb-4">Â© 2023 ChadLoh | All rights reserved.</p>
      </div>
    </div>
    <!-- /.container -->
  </footer>
  <div class="progress-wrap">
    <svg class="progress-circle svg-content" width="100%" height="100%" viewBox="-1 -1 102 102">
      <path d="M50,1 a49,49 0 0,1 0,98 a49,49 0 0,1 0,-98" />
    </svg>
  </div>
  <script src="./assets/js/plugins.js"></script>
  <script src="./assets/js/theme.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
  <script>hljs.highlightAll();</script>
</body>

</html>