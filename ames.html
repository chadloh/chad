<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="Chad's personal website.">
  <meta name="keywords" content="chad, chadloh, hyunchae loh, hyun chae loh, resume, CV, personal website, research, price prediction, geographical value, python, data visualization">
  <meta name="author" content="chadloh">
  <title>Chad Loh - Price Prediction</title>
  <link rel="shortcut icon" href="./assets/img/favicon.png">
  <link rel="stylesheet" href="./assets/css/plugins.css">
  <link rel="stylesheet" href="./assets/css/style.css">
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-E8ZS83VSS9"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'G-E8ZS83VSS9');
  </script>
</head>

<body>
  <div class="content-wrapper">
    <header class="wrapper bg-light">
      <nav class="navbar navbar-expand-lg center-logo transparent navbar-light">
        <div class="container flex-lg-row flex-nowrap align-items-center">
          <div class="navbar-brand w-100">
            <a href="./index.html#home">
              <img src="./assets/img/logo.png" srcset="./assets/img/logo@2x.png 2x" alt="">
            </a>
          </div>
          <div class="navbar-collapse offcanvas offcanvas-nav offcanvas-start">
            <div class="offcanvas-header d-lg-none d-xl-none">
              <a href="./index.html#home"><img src="./assets/img/logo-light.png" srcset="./assets/img/logo-light@2x.png 2x" alt="" /></a>
              <button type="button" class="btn-close btn-close-white" data-bs-dismiss="offcanvas" aria-label="Close"></button>
            </div>
            <div class="offcanvas-body ms-lg-auto d-flex flex-column h-100">
              <ul class="navbar-nav">
                <li class="nav-item"><a class="nav-link" href="./index.html#home">Home</a></li>
                <li class="nav-item"><a class="nav-link" href="./index.html#about">About</a></li>
                <li class="nav-item"><a class="nav-link active" href="./index.html#projects">Projects</a></li>
                <li class="nav-item"><a class="nav-link" href="./index.html#contact">Contact</a></li>
              </ul>
              <!-- /.navbar-nav -->
            </div>
            <!-- /.offcanvas-body -->
          </div>
          <!-- /.navbar-collapse -->
          <div class="navbar-other w-100 d-flex ms-auto">
            <ul class="navbar-nav flex-row align-items-center ms-auto social">
              <li class="nav-item"><a href="https://www.instagram.com/chadloh/"><i class="uil uil-instagram"></i></a></li>
              <li class="nav-item"><a href="https://github.com/chadloh"><i class="uil uil-github"></i></a></li>
              <li class="nav-item"><a href="https://www.linkedin.com/in/chadloh/"><i class="uil uil-linkedin"></i></a></li>
              <li class="nav-item"><a href="https://scholar.google.com/citations?user=TGiD1W0AAAAJ&hl=en&oi=ao"><i class="uil uil-graduation-cap"></i></a></li>
              <li class="nav-item d-lg-none">
                <button class="hamburger offcanvas-nav-btn"><span></span></button>
              </li>
            </ul>
            <!-- /.navbar-nav -->
          </div>
        </div>
        <!-- /.container -->
      </nav>

      <!-- /.navbar -->
    </header>
    <!-- /header -->
    <section class="wrapper image-wrapper bg-image bg-overlay text-white" data-image-src="./assets/img/proj3/Houses.jpg">
      <div class="container pt-17 pb-12 pt-md-19 pb-md-16 text-center">
        <div class="row">
          <div class="mx-auto">
            <div class="post-header">
              <div class="post-category text-line text-white">
                <a href="#" class="text-reset" rel="category">Data Science</a>
              </div>
              <!-- /.post-category -->
              <h1 class="display-1 mb-3 text-white">A geographic approach to housing price prediction</h1>
              <p class="lead px-md-12 px-lg-12 px-xl-15 px-xxl-18"> The neighborhood is an important factor when you look for a house. <br>
              How can we evaluate the geographic value?</p>
            </div>
            <!-- /.post-header -->
          </div>
          <!-- /column -->
        </div>
        <!-- /.row -->
      </div>
      <!-- /.container -->
    </section>
    <!-- /section -->
    <section class="wrapper bg-light wrapper-border">
      <div class="container pt-14 pt-md-16 pb-13 pb-md-15">
        <div class="row">
          <div class="col">
            <article>
              <h2 class="display-6 mb-4">üõí Introduction</h2>
              <div class="row gx-0 mb-17">
                <div class="col-md-9 text-justify">
                  <p>Initial meetings with real estate clients often involve a reality check around price expectations.
                    For example, a buyer comes in expecting they can get much more for their money than is reasonable given the market.
                    Or a seller assumes they can get a price much higher than is typical due to anecdotal evidence that the market is much hotter than it is.
                    Depending on the disconnect's severity, these meetings can be tense and time-consuming as they are less likely to end in a transaction.</p>
                  <p>Predicting the house price with the house features is a common machine learning topic. And the <b>neighborhood</b> is usually an important factor that influences the housing prices.
                    However, neighborhoods are seldom arbitrarily defined. Sometimes there are neighborhoods within a broader neighborhood. Sometimes the neighborhoods are just a few blocks of houses.</p>
                  <p>What if we could estimate the <b>geographic value</b> of the house instead of labeling each house with a few pre-defined neighborhoods? Could this continuous feature improve the price prediction model?</p>
                  <p>This project explores the housing sales data in Ames, IA (provided by Kaggle). Various machine learning models were explored, and the final results were deployed in a preliminary Shiny app.</p>
                </div>
                <!--/column -->
                <div class="col-md-2 ms-auto">
                  <h5 class="mb-1">Date</h5>
                  <p>9 Jun 2022</p>
                </div>
                <!--/column -->
              </div>
              <div class = "row mb-17">
                <h2 class="display-6 mb-4">üñ•Ô∏è Exploratory data analysis</h2>
                <h4>Visualization of the neighborhoods</h4>
                <div class="col-12 text-justify">
                  <p>
                    As seen from one of my previous projects, <a href="./nycbuilding.html" class="hover">New York City: Booms and Blooms</font></a>, neighborhoods bloom through a series of construction booms and development in the city/town.
                    The age of the houses are first visualized in the image below. As the neighborhood name indicates, the <b>Old Town</b> neighborhood was the oldest neighborhood in Ames.
                    And new neighborhoods formed one-by-one around the Old Town and became the current Ames. The newest neighborhoods were in the perimeter of the town.
                    The second map shows the sale price for each house. As expected, most of the houses sold with high prices (> $400,000) are found in the newer neighborhoods.
                    Especially, the house sale prices in Northridge Heights and Northridge neighborhoods were more than 2x the price of the median house sale price (~$160,000).
                  </p>
                </div>
                <div class="col-lg-6 gx-6 pt-4 pb-6">
                  <figure class="rounded"><img src="./assets/img/proj3/Blogimages-01.jpg" alt="" /></figure>
                </div>
                <div class="col-lg-6 gx-6 pt-4 pb-6">
                  <figure class="rounded"><img src="./assets/img/proj3/Blogimages-02.jpg" alt="" /></figure>
                </div>
                <div class="col">
                  <p>
                    Most of the houses in Ames, IA are Single family houses. And the median of the house sales price was around $160,000 in 2006-2010.
                    The price is then plotted against the square footage of the living area. There is a high correlation between the housing price and the area, as shown with a regression line (blue).
                  </p>
                </div>
                <div class="col-12 pt-4 pb-6 px-lg-20">
                  <figure class="rounded"><img src="./assets/img/proj3/Blogimages-03.jpg" alt="" /></figure>
                </div>
                <div class="col">
                  <p>
                    For a fair comparison among houses, we can divide the sales price by the area to obtain the price per ft<sup>2</sup>.
                    Two of the most controlling factor of the housing price were the overall quality and condition of the houses.
                    The average price per ft<sup>2</sup> is compared with the overall quality and condition.
                    As expected, houses with high built quality and in good condition were valued more.
                  </p>
                </div>
                <div class="col-12 pt-4 pb-6 px-lg-20">
                  <figure class="rounded"><img src="./assets/img/proj3/Blogimages-04.jpg" alt="" /></figure>
                </div>

              </div>
              <div class = "row mb-17">
                <h2 class="display-6 mb-4">üë®‚Äçüîß Feature engineering</h2>
                <p>
                  The neighborhood was labeled inconsistently, and the sizes of the neighborhoods (i.e., the number of houses in each neighborhood) varied. Some neighborhoods had less than ten sales data, which could result in overfitting.
                  Instead of using a categorical feature, we engineered a new numerical feature that is related to the geographic value.
                  The geographic value is determined after the model is trained.
                </p>
                <p>
                  The geographic value indicates how much value is added to the house for being at that location.
                  The same house with the same features will have a higher price if the geographical value is higher.
                  Using this feature, we can estimate the house price without labeling it in a certain neighborhood.
                  Interestingly, the geographic value correlated with the crime rate ‚Äì regions with higher crime rates have lower geographic values.
                </p>
                <div class="col-lg-6 gx-6 pt-4 pb-6">
                  <figure class="rounded"><img src="./assets/img/proj3/geovalue.gif" alt="" /></figure>
                </div>
                <div class="col-lg-6 gx-6 pt-4 pb-6">
                  <figure class="rounded"><img src="./assets/img/proj3/Blogimages-07.jpg" alt="" /></figure>
                </div>
              </div>


              <div class = "row mb-17">
                <div class="col text-justify">
                  <h2 class="display-6 mb-4">ü¶æ Machine Learning Algorithms</h2>
                  <p>
                    Initially, the dataframe included 145 features (including the one-hot encoded and engineered features).
                    This was reduced to 45 through exploratory data analysis, and finally, the features were reduced to 32 using Lasso Regression.
                    The data were then split into the train (70%) and test (30%) datasets.
                  </p>
                  <h4>Multiple Linear Regression</h4>
                  <p>
                    First, the Lasso Regression model was used to eliminate insignificant features.
                    The graph below shows the coefficients of some variables with different lambda values (log-scale).
                    The features that ‚Äúsurvive‚Äù longer up to a high lambda value have a larger contribution (either positive or negative) to the price.
                    For example, the quality and condition have a large impact on the house price.
                  </p>
                </div>
                <div class="col-12 pt-4 pb-6 px-lg-20">
                  <figure class="rounded"><img src="./assets/img/proj3/Blogimages-09.jpg" alt="" /></figure>
                </div>
                <div class="col text-justify">
                  <p>
                    Then, the Ridge regression model was trained. Grid search with cross-validation (3 folds) identified lambda of 0.0032 to be the best for the Ridge model and returned an R-squared of 0.900.
                    The figures below show how the prediction compares to the actual sales price. And the residual map shows which house the pricing model is overestimating (red) and underestimating (blue).
                  </p>
                </div>
                <div class="col-12 pt-4 pb-6 px-lg-20">
                  <figure class="rounded"><img src="./assets/img/proj3/Blogimages-10.jpg" alt="" /></figure>
                </div>
                <div class="col text-justify">
                  <h4>Other ML methods</h4>
                  <p>
                    Other machine learning methods were also tested. The test results with the best parameters are summarized in the table below.
                  </p>
                  <div class="table-responsive">
                    <table class="table">
                      <thead>
                        <tr>
                          <th scope="col">Method</th>
                          <th scope="col">Best R<sup>2</sup> score</th>
                          <th scope="col">Hyperparameters</th>
                        </tr>
                      </thead>
                      <tbody>
                      <tr>
                        <th scope="row">Lasso Regression</th>
                        <td>0.900</td>
                        <td>
                          <ul>
                            <li>CV = 3</li>
                            <li>Lambda = 10<sup>-5</sup></li>
                            <li>Normalization</li>
                          </ul>
                        </td>
                      </tr>
                      <tr>
                        <th scope="row">Ridge Regression</th>
                        <td>0.900</td>
                        <td>
                          <ul>
                            <li>CV = 3</li>
                            <li>Lambda = 0.0032</li>
                            <li>Normalization</li>
                          </ul>
                        </td>
                      </tr>
                        <tr>
                          <th scope="row">SVR</th>
                          <td>0.918</td>
                          <td>
                            <ul>
                              <li>RBF kernel</li>
                              <li>epsilon = 0.1</li>
                              <li>gamma = 0.01</li>
                            </ul>
                          </td>
                        </tr>
                        <tr>
                          <th scope="row">Random Forest</th>
                          <td>0.899</td>
                          <td>
                            <ul>
                              <li>500 trees</li>
                              <li>7 max features</li>
                              <li>subsample = 0.8</li>
                              <li>column sample = 0.8</li>
                            </ul>
                          </td>
                        </tr>
                        <tr>
                          <th scope="row">Boosting</th>
                          <td>0.922</td>
                          <td>
                            <ul>
                              <li>5000 trees</li>
                              <li>7 max features</li>
                              <li>learning rate = 0.01</li>
                            </ul>
                          </td>
                        </tr>
                        <tr>
                          <th scope="row">XG Boosting</th>
                          <td>0.923</td>
                          <td>
                            <ul>
                              <li>5000 trees</li>
                              <li>7 max features</li>
                              <li>learning rate = 0.01</li>
                              <li>gamma = 0.01</li>
                              <li>subsample = 0.8</li>
                              <li>column sample = 0.8</li>
                            </ul>
                          </td>
                        </tr>
                      </tbody>
                    </table>
                  </div>
                </div>
              </div>
              <div class = "row mb-17">
                <div class="col text-justify">
                  <h2 class="display-6 mb-4">üì± Shiny App</h2>
                  <h4>This app is best viewed on large screens</h4>
                  <iframe height="900" width="100%" frameborder="no" src="https://rixpc2-chad-loh.shinyapps.io/Ames-price-prediction/"> </iframe>
                </div>
              </div>
              <div class = "row mb-17">
                <div class="col text-justify">
                  <h2 class="display-6 mb-4">üìù Conclusion</h2>
                  <ul>
                    <li>While many factors affect house prices; squarefootage, overall quality and condition are consistently shown as important features.</li>
                    <li>We were able to successfully predict house prices with ML models achieving R<sup>2</sup>scores from 0.90 to 0.92.</li>
                    <li>Created a framework for estimating the geographical value based on historic data and machine learning techniques.</li>
                    <li>Implemented various ML approaches with new features, improving upon the initial linear regression model with all 145 features included. </li>
                    <li>Developed an interactive web based application that allows users to explore house prices and generate predictions.</li>
                  </ul>
                </div>
              </div>

              <div class = "row mb-17">
                <h5 class="mb-1">Data Source</h5>
                <h6>Ames, IA housing sales data</h6>
              </div>
              <!--/.row -->
            </article>
            <!-- /.project -->
          </div>
          <!-- /column -->
        </div>
        <!-- /.row -->
      </div>
    </section>
    <!-- /section -->
    <section class="wrapper bg-light">
      <div class="container py-10">
        <div class="row gx-md-6 gy-3 gy-md-0">
          <div class="col-md-8 align-self-center text-center text-md-start navigation">
            <a href="./airlines.html" class="btn btn-soft-ash rounded-pill btn-icon btn-icon-start mb-0 me-1"><i class="uil uil-arrow-left"></i> Prev Post</a>
            <a href="./socialvulnerability.html" class="btn btn-soft-ash rounded-pill btn-icon btn-icon-end mb-0">Next Post <i class="uil uil-arrow-right"></i></a>
          </div>
        </div>
      </div>
    </section>
    <!-- /section -->
  </div>
  <!-- /.content-wrapper -->
  <footer class="bg-dark text-inverse">
    <div class="container py-5">
      <div class="col-12 text-center">
        <img class="mb-4" src="./assets/img/logo-light.png" srcset="./assets/img/logo-light@2x.png 2x" alt="" />
        <p class="mb-4">¬© 2022 ChadLoh | All rights reserved.</p>
      </div>
    </div>
    <!-- /.container -->
  </footer>
  <div class="progress-wrap">
    <svg class="progress-circle svg-content" width="100%" height="100%" viewBox="-1 -1 102 102">
      <path d="M50,1 a49,49 0 0,1 0,98 a49,49 0 0,1 0,-98" />
    </svg>
  </div>
  <script src="./assets/js/plugins.js"></script>
  <script src="./assets/js/theme.js"></script>

</body>


</html>
