<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="Chad's personal website.">
  <meta name="keywords" content="chad, chadloh, hyunchae loh, hyun chae loh, resume, CV, personal website, research, gps, gnss, machine learning, python, data visualization">
  <meta name="author" content="chadloh">
  <meta property="og:image" content="./assets/img/decimeter/img-11.png" />
  <title>Chad Loh - Google Decimeter Challenge</title>
  <link rel="shortcut icon" href="./assets/img/favicon.png">
  <link rel="stylesheet" href="./assets/css/plugins.css">
  <link rel="stylesheet" href="./assets/css/style.css">
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-E8ZS83VSS9"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'G-E8ZS83VSS9');
  </script>
</head>

<body>
  <div class="content-wrapper">
    <header class="wrapper bg-light">
      <nav class="navbar navbar-expand-lg center-logo transparent navbar-light">
        <div class="container flex-lg-row flex-nowrap align-items-center">
          <div class="navbar-brand w-100">
            <a href="./index.html#home">
              <img src="./assets/img/logo.png" srcset="./assets/img/logo@2x.png 2x" alt="">
            </a>
          </div>
          <div class="navbar-collapse offcanvas offcanvas-nav offcanvas-start">
            <div class="offcanvas-header d-lg-none d-xl-none">
              <a href="./index.html#home"><img src="./assets/img/logo-light.png" srcset="./assets/img/logo-light@2x.png 2x" alt="" /></a>
              <button type="button" class="btn-close btn-close-white" data-bs-dismiss="offcanvas" aria-label="Close"></button>
            </div>
            <div class="offcanvas-body ms-lg-auto d-flex flex-column h-100">
              <ul class="navbar-nav">
                <li class="nav-item"><a class="nav-link" href="./index.html#home">Home</a></li>
                <li class="nav-item"><a class="nav-link" href="./index.html#about">About</a></li>
                <li class="nav-item"><a class="nav-link active" href="./index.html#projects">Projects</a></li>
                <li class="nav-item"><a class="nav-link" href="./index.html#contact">Contact</a></li>
              </ul>
              <!-- /.navbar-nav -->
            </div>
            <!-- /.offcanvas-body -->
          </div>
          <!-- /.navbar-collapse -->
          <div class="navbar-other w-100 d-flex ms-auto">
            <ul class="navbar-nav flex-row align-items-center ms-auto social">
              <li class="nav-item"><a href="https://www.instagram.com/chadloh/"><i class="uil uil-instagram"></i></a></li>
              <li class="nav-item"><a href="https://github.com/chadloh"><i class="uil uil-github"></i></a></li>
              <li class="nav-item"><a href="https://www.linkedin.com/in/chadloh/"><i class="uil uil-linkedin"></i></a></li>
              <li class="nav-item"><a href="https://scholar.google.com/citations?user=TGiD1W0AAAAJ&hl=en&oi=ao"><i class="uil uil-graduation-cap"></i></a></li>
              <li class="nav-item d-lg-none">
                <button class="hamburger offcanvas-nav-btn"><span></span></button>
              </li>
            </ul>
            <!-- /.navbar-nav -->
          </div>
        </div>
        <!-- /.container -->
      </nav>

      <!-- /.navbar -->
    </header>
    <!-- /header -->
    <section class="wrapper image-wrapper bg-image bg-overlay text-white" data-image-src="./assets/img/decimeter/houston-traffic.jpg">
      <div class="container pt-17 pb-12 pt-md-19 pb-md-16 text-center">
        <div class="row">
          <div class="mx-auto">
            <div class="post-header">
              <div class="post-category text-line text-white">
                <a href="#" class="text-reset" rel="category">Data Science</a>
              </div>
              <!-- /.post-category -->
              <h1 class="display-1 mb-3 text-white">Google Decimeter Challenge: <br>Advanced Kalman Filter</h1>
              <p class="lead px-md-12 px-lg-12 px-xl-15 px-xxl-18"> Can we enhance the accuracy of the GPS on our phones? <br>
              Maybe down to a decimeter accuracy?</p>
            </div>
            <!-- /.post-header -->
          </div>
          <!-- /column -->
        </div>
        <!-- /.row -->
      </div>
      <!-- /.container -->
    </section>
    <!-- /section -->
    <section class="wrapper bg-light wrapper-border">
      <div class="container pt-14 pt-md-16 pb-13 pb-md-15">
        <article>
          <h2 class="display-6 mb-4">üìç Goal of the Competition</h2>
          <div class="row gx-0 mb-17">
            <div class="col text-justify">
              <p>
                "The goal of this competition is to compute smartphones location down to the decimeter or even centimeter resolution,
                which could enable services that require lane-level accuracy such as HOV lane ETA estimation. Your work will help
                produce more accurate positions, bridging the connection between the geospatial information of finer human behavior
                and mobile internet with improved granularity. As a result, new navigation methods could be built upon the more precise data."
                <a href="https://www.kaggle.com/competitions/smartphone-decimeter-2022">Kaggle challenge page</a>
              </p>
              <p>
                The training data is from 62 separate drives around San Francisco and the Los Angeles area.
                Navigation Satellite Systems (GNSS) Data, Inertial Measurement Unit (IMU) Data were collected from 1-5 phones during each drive.
                In addition, the ground truth data were collected from a high-precision GNSS-IMU device in the exact vehicle.
                The map below shows the traces of the ground truth and the baseline obtained from the GNSS data.
              </p>
              <p>
                The submissions are evaluated with a separate test dataset. The score is the mean of the 50th and 95th percentile distance errors for every phone and second.
                The 50th and 95th percentile errors are then averaged for each phone. Lastly, the mean of these averaged values is calculated across all phones in the test set.
              </p>
            </div>
          </div>
          <div class = "row mb-17">
            <div class="col-12 text-justify">
              <h2 class="display-6 mb-4">üåç The Coordinate Systems</h2>
              <p>
                Before we begin with the GPS data, let's talk about the coordinate systems used in this project.
                Choosing the correct coordinate system for each function and accurately converting the different
                coordinate systems are crucial in this project. The four coordinate systems used in this project are:
                <ol>
                  <li>Earth-Centered Earth-Fixed(ECEF) coordinate system</li>
                  <li>Geodetic coordinate system</li>
                  <li>Scene East-North-Up (ENU)</li>
                  <li>Car-centered</li>
                </ol>
              </p>
              <div class="gx-6 pt-4 pb-6 px-lg-16">
                <figure class="rounded"><img src="./assets/img/decimeter/img-01.png" alt="" /></figure>
              </div>
              <h4>Earth-Centered Earth-Fixed(ECEF) coordinate system</h4>
              <p>
                First, the satellites are tracked with the ECEF coordinate system, also called the Geocentric coordinate system.
                The interactive plot below shows the location of the GPS satellites in this dataset compared to the Earth.
                The origin is at the center of the chosen ellipsoid, which in this case is the Earth's center of mass.
                <ul>
                  <li>The X-axis is the line through the origin and the prime meridian in the plane of the equator.</li>
                  <li>The Y-axis is the line through the 90E and 90W longitude planes and the equator's plane.</li>
                  <li>The Z-axis is the line between the North and South Poles.</li>
                </ul>
              </p>
              <div>
                <iframe src="https://chart-studio.plotly.com/~chadloh/43.embed" title="Satellites", width = 100%, height = 600></iframe>
              </div>
              <h4>Geodetic coordinate system</h4>
              <p>
                Geodetic coordinate system is a spherical coordinate system where longitude and latitude define the angles from the reference axes, and the altitude is defined as the distance from the origin.
              </p>
              <h4>Scene East-North-Up (ENU)</h4>
              <p>
                The scene ENU coordinate system only applies in a relatively small area since it approximates the Earth's curved surface into a local plane.
                The x, y, and z axes are the directions East (+x), North (+y), and Up (+z).
                Care should be taken when this coordinate is used since the error between the actual location and the location in this ENU approximation increases are the device travels far from the origin.
              </p>
              <h4>Car-centered coordinate system</h4>
              <p>
                You are in your own universe when driving. In this universe, you are always moving forward as the world revolves around you.
                The y-axis is always aligned with the driving direction (heading), and the x-axis is always on the side of the car.
              </p>
            </div>
          </div>
          <div class = "row mb-17">
            <div class="col-12 text-justify">
              <h2 class="display-6 mb-4">üì° How does GNSS work?</h2>
              <p>
                Global Navigation Satellite System (GNSS) uses satellite information to provide positioning of small devices.
                Among the GNSS systems, the US government-owned Global Positioning System (GPS) is used in the United States.
                The location of the 30+ GPS satellites is known at any given time.
                These satellites constantly send signals, which are received from mobile GNSS/GPS devices.
                The elapsed time from the satellite's transmission to reception is used for calculating the distance between the device and the satellite.
              </p>
              <p>
                The location of the device can be triangulated (or 'trilateration') when the distance to at least four satellites is available.
                Due to the errors in satellite signals, however, the location can only be estimated using optimization.
                GPS locations are generally estimated using a Weighted Least Squared (WLS) technique.
                When the satellite locations are S<sub>i</sub>, the location X is where the weighted sum of the squared error Œ£(r<sub>i</sub> - d<sub>i</sub>)<sup>2</sup> is minimal.
              </p>
              <div class="gx-6 pt-4 pb-6 px-lg-22">
                <figure class="rounded"><img src="./assets/img/decimeter/img-02.png" alt="" /></figure>
              </div>
            </div>
          </div>
          <div class = "row mb-17">
            <div class="col-12 text-justify">
              <h2 class="display-6 mb-4">ü™Ñ Kalman Filter</h2>
              <p>
                In this project, the Kalman filter is used to reduce the errors.
                Kalman filter is an optimal estimation method that uses both a prediction model based on the previous state and a new measurement to optimize the state of the next step.
                For GPS positioning, the prediction is the physical model based on the position and velocity of the device, and the measurements are from the satellites' GNSS data.
                <ol>
                  <li>First, the state is initialized with the position and velocity at the time 0. The position x<sub>t-1|t-1</sub> is assumed to have a Gaussian distribution with a variance of P<sub>t-1|t-1</sub>, where t-1 denotes the time of the "previous step".</li>
                  <li>Next, an estimation x<sub>t|t-1</sub> is made based on the state at t = t-1.
                    This estimation is assumed to have a Gaussian distribution, and the variance of the estimate (P<sub>t|t-1</sub>) is derived from the previous step. </li>
                  <li>The next measurement z<sub>t</sub> is obtained, which also has a Gaussian distribution with a variance R<sub>t</sub>.
                    The measurement, however, is not necessarily at the same location as the model prediction.</li>
                  <li>The next estimation P<sub>t|t</sub> is therefore calculated by combining the information from the model and the measurement.
                    The weight of the model in this calculation is the Kalman gain K<sub>t</sub>, and it depends on the uncertainty of the model and the measurements.</li>
                  <li>This process is iterated to make the next estimations.</li>
                </ol>
              </p>
              <div class="gx-6 pt-4 pb-6 px-lg-16">
                <figure class="rounded"><img src="./assets/img/decimeter/img-03.png" alt="" /></figure>
              </div>
            </div>
          </div>
          <div class = "row mb-17">
            <h2 class="display-6 mb-4">üë®‚Äçüîß The "Advanced" Kalman Filter</h2>
            <h4>Pseudo-Satellite Estimation</h4>
            <p>
              Several new approaches to the GNSS positioning was implemented in order to advance the Kalman Filter. Here, we introduce two of the new approaches used for the submission.
              <br>
              The approximated locations of the device during the trip is obtained with the Kalman filter. This new approximation could also be used in the point positioning optimization process.
              If we think that there is a satellite at the center of Earth (hence, pseudo-satellite estimate), we can use the distance to the Kalman filter estimate as a new pseudorange.
            </p>
            <div class="col-lg-6 gx-16 pt-4 pb-6">
              <figure class="rounded"><img src="./assets/img/decimeter/img-05.png" alt="" /></figure>
            </div>
            <div class="col-lg-6 gx-16 pt-4 pb-6">
              <figure class="rounded"><img src="./assets/img/decimeter/img-06.png" alt="" /></figure>
            </div>
            <h4>Signal Angle Penalization</h4>
            <p>
              Obstructions are one of the significant sources of GPS errors, and signal reflects on objects, adding error to the transmission time.
              Since the data is collected during drives, we can assume that there are more obstructions on the car's sides (x-axis in the car-centered coordinate system)
              than along the driving direction (y-axis in the car-centered coordinate system). We can multiply the weight in the WLS optimization by 2+abs(cos(angle)) to penalize the signals from the sides.
            </p>
            <div class="col-lg-6 gx-16 pt-4 pb-6">
              <figure class="rounded"><img src="./assets/img/decimeter/img-07.png" alt="" /></figure>
            </div>
            <div class="col-lg-6 gx-16 pt-4 pb-6">
              <figure class="rounded"><img src="./assets/img/decimeter/img-08.png" alt="" /></figure>
            </div>
          </div>
          <div class = "row mb-17">
            <h2 class="display-6 mb-4">üéñÔ∏è Results</h2>
            <h4>Comparison with the baseline</h4>
            <p>
              The baseline, Kalman Filter, and Advanced Kalman Filter estimates are visualized below.
              The errors from the Ground truth were: Baseline 9.24 m, Kalman Filter 3.46 m, and Advanced Kalman Filter 2.70 m.
              You can zoom in to the center of the map to see how accurately the Kalman Filter can estimate where the device is,
              which even successfully differentiated which lane the car was driving on.
            </p>
            <div>
              <iframe src="https://chart-studio.plotly.com/~chadloh/1.embed" title="Satellites", width = 100%, height = 400></iframe>
            </div>
            <div class="gx-6 pt-4 pb-6 px-lg-16">
              <figure class="rounded"><img src="./assets/img/decimeter/img-09.png" alt="" /></figure>
            </div>
            <p>
              The two plots below compare the errors of the baseline and advanced Kalman filter estimates.
              Any datapoint with an error larger than 5m is shown in yellow.
              We can clearly see that most of the points have an GPS error lower than 5 meters after the Kalman filter.
            </p>
            <div class="gx-6 pt-4 pb-6 px-lg-16">
              <figure class="rounded"><img src="./assets/img/decimeter/img-10.png" alt="" /></figure>
            </div>
            <p>
              Finally, the distribution of the errors are plotted as density plots. The baseline errors were much larger with many outlier datapoints.
              After the WLS optimization, Kalman filter, and the advanced Kalman filter, the error has significantly decreased.
            </p>

            <div>
              <iframe src="https://chart-studio.plotly.com/~chadloh/10.embed" title="Results", width = 100%, height = 800></iframe>
            </div>

          </div>

          <div class = "row mb-17">
            <div class="col text-justify">
              <h2 class="display-6 mb-4">üìù Current Status</h2>
              <p>
                We successfully implemented WLS optimization, Kalman Filter, and more advanced and creative techniques to reduce the GPS error.
                The results are submitted to Google Decimeter Challenge (Kaggle), and the current score of this method is <b>2.826 m</b>, with a current ranking of <b>26th</b> as of June 22nd, 2022.
                This is already a 42% error reduction from the baseline ü•≥

              </p>
              <div class="gx-6 pt-4 pb-6 px-lg-16">
                <figure class="rounded"><img src="./assets/img/decimeter/img-12.png" alt="" /></figure>
              </div>
            </div>
          </div>
          <div class = "row mb-17">
            <p>
             This project is developed by Chad Loh, Layal Hammad, Michelle Bui, and Caroline Keough
            </p>
          </div>
          <div>
            <h5 class="mb-1">Data Source</h5>
            <ul>
              <li>Fu, Guoyu (Michael), Khider, Mohammed, van Diggelen, Frank, "Android Raw GNSS Measurement Datasets for Precise Positioning," Proceedings of the 33rd International Technical Meeting of the Satellite Division of The Institute of Navigation (ION GNSS+ 2020), September 2020, pp. 1925-1937.
                <a href="https://doi.org/10.33012/2020.17628">DOI</a></li>

              <li>Fu, Guoyu (Michael), Khider, Mohammed, van Diggelen, Frank, (2022, May), Google Smartphone Decimeter Challenge. Retrieved [Date Retrieved] from <a href="https://kaggle.com/competitions/smartphone-decimeter-2022/data">Link</a>.</li>
            </ul>
          </div>
          <!--/.row -->
        </article>
      </div>
    </section>
    <!-- /section -->
    <section class="wrapper bg-light">
      <div class="container py-10">
        <div class="row gx-md-6 gy-3 gy-md-0">
          <div class="col-md-8 align-self-center text-center text-md-start navigation">
            <a href="./ames.html" class="btn btn-soft-ash rounded-pill btn-icon btn-icon-start mb-0 me-1"><i class="uil uil-arrow-left"></i> Prev Post</a>
            <a href="./socialvulnerability.html" class="btn btn-soft-ash rounded-pill btn-icon btn-icon-end mb-0">Next Post <i class="uil uil-arrow-right"></i></a>
          </div>
        </div>
      </div>
    </section>
    <!-- /section -->
  </div>
  <!-- /.content-wrapper -->
  <footer class="bg-dark text-inverse">
    <div class="container py-5">
      <div class="col-12 text-center">
        <img class="mb-4" src="./assets/img/logo-light.png" srcset="./assets/img/logo-light@2x.png 2x" alt="" />
        <p class="mb-4">¬© 2022 ChadLoh | All rights reserved.</p>
      </div>
    </div>
    <!-- /.container -->
  </footer>
  <div class="progress-wrap">
    <svg class="progress-circle svg-content" width="100%" height="100%" viewBox="-1 -1 102 102">
      <path d="M50,1 a49,49 0 0,1 0,98 a49,49 0 0,1 0,-98" />
    </svg>
  </div>
  <script src="./assets/js/plugins.js"></script>
  <script src="./assets/js/theme.js"></script>

</body>


</html>
